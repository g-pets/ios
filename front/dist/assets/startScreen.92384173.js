import{o as e,_ as t,a}from"./index.2e276b26.js";import{d as r,r as o,o as n,c,a as l,l as d,F as s,j as i,t as u,f as h}from"./vendor.c1d6a809.js";const m=e("iOS",1,{upgrade(e){const t=e.createObjectStore("notes",{keyPath:"id",autoIncrement:!1});t.createIndex("id","id"),t.createIndex("created","created")}});const y={class:"app notes-app"},p={class:"list-view notes"},R={class:"title"},v={class:"time"},g=l("div",{class:"arrow"},"Â >",-1);const f={name:"textApp",components:{navigationBar:a},methods:{openNote(e){this.$router.push({name:"noteScreen",params:{id:e}})},async addRecord(){let e=this.generateId();await this.$router.push({name:"noteScreen",params:{id:e}}),await this.createRecord({id:e})}},setup(){document.title="Notes | iOS";const{records:e,getRecords:a,createRecord:o,generateId:n,deleteAllRecords:c}=function(e){const a=r([]),o=()=>JSON.stringify(Date.now()),n=async(r={})=>{let n,c,l;try{return n=o(),c=t(r),c.id=n,c.created=Date.now(),a.value.push(c),l=await m.add(e,c),l}catch(d){console.error(d)}finally{n=null,c=null,l=null}};return{records:a,getRecordF:async e=>{let t;try{return t={content:"343"},t}catch(a){console.error(a)}finally{t=null}},getRecords:async()=>{let t;try{t=await m.getAllFromIndex(e,"created"),a.value=t}catch(r){console.error(r)}finally{t=null}},createRecord:n,updateRecord:async e=>{let r,o,n;try{let c=e._id;r=t(a[c]),o=t(e),o.updated=Date.now(),a[c]=o,n=await restRequest({method:"put",module:module,id:c,data:o}),n.ok||(a[c]=r)}catch(c){console.error(c)}finally{r=null,o=null,n=null}},dublicateRecord:async e=>{let r,o;try{r=a[e],o=t(r),await n(o)}catch(c){console.error(c)}finally{r=null,o=null}},deleteRecord:async e=>{let t;try{a[e].hidden=!0,t=await restRequest({method:"delete",module:module,id:e}),t.ok?delete a[e]:a[e].hidden=!1}catch(r){console.error(r)}finally{t=null}},createDummyRecords:async(e,t)=>{try{let a=await fetch(`http://localhost:85/v1/${e}/${t}`);(await a.json()).forEach((e=>n(e)))}catch(a){console.error(a)}},deleteAllRecords:async()=>{try{a.value=[],await m.clear(e)}catch(t){console.error(t)}},generateId:o}}("notes");return h((()=>a())),{records:e,createRecord:o,convertTime:function(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},generateId:n,deleteAllRecords:c}},render:function(e,t,a,r,h,m){const f=o("navigation-bar");return n(),c("div",y,[l(f,{title:`Notes (${r.records.length})`,background:["#875D52","#51372F","#3B2D21"]},{btn:d((()=>[l("div",{class:"add-note",onClick:t[1]||(t[1]=(...e)=>m.addRecord&&m.addRecord(...e))},"+"),l("div",{class:"add-note",onClick:t[2]||(t[2]=(...e)=>r.deleteAllRecords&&r.deleteAllRecords(...e))},"-")])),_:1},8,["title"]),l("div",p,[(n(!0),c(s,null,i(r.records,(e=>(n(),c("div",{class:"note",onClick:t=>m.openNote(e.id)},[l("div",R,u(e.title),1),l("div",v,u(r.convertTime(e.created)),1),g],8,["onClick"])))),256))])])}};export default f;
