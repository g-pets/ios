import{a as e,i as t,_ as a}from"./vendor.23464d0d.js";function l(l){const r=e([]),o=async(e={})=>{let o,c;try{const n=await t("iOS",1);o=a(e),o.created=Date.now(),r.value.push(o),c=await n.add(l,o)}catch(n){console.error(n)}finally{o=null,c=null}};return{records:r,getRecordF:async e=>{let t;try{return t={content:"343"},t}catch(a){console.error(a)}finally{t=null}},getRecords:async()=>{let e;try{const a=await t("iOS",1);e=await a.getAllFromIndex(l,"created"),r.value=e}catch(a){console.error(a)}finally{e=null}},createRecord:o,updateRecord:async e=>{let t,l,o;try{let c=e._id;t=a(r[c]),l=a(e),l.updated=Date.now(),r[c]=l,o=await restRequest({method:"put",module:module,id:c,data:l}),o.ok||(r[c]=t)}catch(c){console.error(c)}finally{t=null,l=null,o=null}},dublicateRecord:async e=>{let t,l;try{t=r[e],l=a(t),await o(l)}catch(c){console.error(c)}finally{t=null,l=null}},deleteRecord:async e=>{let t;try{r[e].hidden=!0,t=await restRequest({method:"delete",module:module,id:e}),t.ok?delete r[e]:r[e].hidden=!1}catch(a){console.error(a)}finally{t=null}},createDummyRecords:async(e,t)=>{try{let a=await fetch(`http://localhost:85/v1/${e}/${t}`);(await a.json()).forEach((e=>o(e)))}catch(a){console.error(a)}},deleteAllRecords:async()=>{try{r.value=[];const e=await t("iOS",1);await e.clear(l)}catch(e){console.error(e)}}}}export{l as u};
