import{r as e,v as t,n,o as a,c as i,w as s,p as o,a as r,b as d,t as l,d as c,F as u,e as p,f as v,g as f}from"./vendor.d6c29b70.js";function m(a={}){const{immediate:i=!0,onNeedRefresh:s,onOfflineReady:o}=a,r=e(!1),d=e(!1);return{updateServiceWorker:function(e={}){const{immediate:a=!1,onNeedRefresh:i,onOfflineReady:s}=e;let o,r;if("serviceWorker"in navigator){o=new t("/sw.js",{scope:"/"}),o.addEventListener("activated",(e=>{e.isUpdate||null==s||s()}));{const e=()=>{null==i||i()};o.addEventListener("waiting",e),o.addEventListener("externalwaiting",e)}o.register({immediate:a}).then((e=>r=e))}return async(e=!0)=>{e&&(null==o||o.addEventListener("controlling",(e=>{e.isUpdate&&window.location.reload()}))),r&&r.waiting&&await n(r.waiting,{type:"SKIP_WAITING"})}}({immediate:i,onNeedRefresh(){r.value=!0,null==s||s()},onOfflineReady(){d.value=!0,null==o||o()}}),offlineReady:d,needRefresh:r}}const g=s()(((e,t,n,s,o,r)=>(a(),i("div",{class:"ui-glare",style:{height:n.height,opacity:n.opacity,borderRadius:n.borderRadius}},null,4))));const y={name:"uiGlare",props:{height:String,opacity:String,borderRadius:String}};y.render=g,y.__scopeId="data-v-0260385b";const h=s();o("data-v-4ebe8354");const b={class:"system-dialog"},R={key:0,class:"title"},w={key:1,class:"content"},k={key:2,class:"buttons"},S={class:"label"};r();const E=h(((e,t,n,s,o,r)=>{const f=v("uiGlare");return a(),i("div",b,[d(f,{height:"1.2em",opacity:"0.7"}),n.title?(a(),i("div",R,l(n.title),1)):c("",!0),n.content?(a(),i("div",w,l(n.content),1)):c("",!0),n.buttons?(a(),i("div",k,[(a(!0),i(u,null,p(n.buttons,(e=>(a(),i("button",{onClick:e.method},[d(f,{height:"45%",opacity:"0.7",borderRadius:"0"}),d("div",S,l(e.label),1)],8,["onClick"])))),256))])):c("",!0)])}));const L={name:"systemDialog",components:{uiGlare:y},props:{title:String,content:String,buttons:Array}};L.render=E,L.__scopeId="data-v-4ebe8354";const U={class:"app-container"};const W={name:"App",components:{systemDialog:L},setup(){const{offlineReady:e,needRefresh:t,updateServiceWorker:n}=m();return{needRefresh:t,updateServiceWorker:n,cancelUpdate:async()=>{e.value=!1,t.value=!1}}}};W.render=function(e,t,n,s,o,r){const d=v("systemDialog");return a(),i("div",U,[s.needRefresh?(a(),i(d,{key:0,title:"Update available",content:"New version of this App is available.",buttons:[{label:"Cancel",method:s.cancelUpdate},{label:"Update",method:s.updateServiceWorker}]},null,8,["buttons"])):(a(),i(d,{key:1,title:"iOS 1.0 App",content:"Coming Soon"}))])},function(e={}){const{immediate:n=!1,onNeedRefresh:a,onOfflineReady:i}=e;let s,o;if("serviceWorker"in navigator){s=new t("/sw.js",{scope:"/"}),s.addEventListener("activated",(e=>{e.isUpdate||null==i||i()}));{const e=()=>{null==a||a()};s.addEventListener("waiting",e),s.addEventListener("externalwaiting",e)}s.register({immediate:n}).then((e=>o=e))}}(),f(W).mount("#app");
