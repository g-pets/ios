import{c as r}from"./store.a37cfa08.js";import{p as o,f as t,o as a,c as e,w as n,j as s,h as i,r as h,a as c}from"./vendor.0c58ddcb.js";var l={},u={},p={};Object.defineProperty(p,"__esModule",{value:!0});var d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"];p.decode83=function(r){for(var o=0,t=0;t<r.length;t++){var a=r[t];o=83*o+d.indexOf(a)}return o},p.encode83=function(r,o){for(var t="",a=1;a<=o;a++){var e=Math.floor(r)/Math.pow(83,o-a)%83;t+=d[Math.floor(e)]}return t};var f,m={};f=m,Object.defineProperty(f,"__esModule",{value:!0}),f.sRGBToLinear=function(r){var o=r/255;return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)},f.linearTosRGB=function(r){var o=Math.max(0,Math.min(1,r));return o<=.0031308?Math.round(12.92*o*255+.5):Math.round(255*(1.055*Math.pow(o,1/2.4)-.055)+.5)},f.sign=function(r){return r<0?-1:1},f.signPow=function(r,o){return f.sign(r)*Math.pow(Math.abs(r),o)};var v,b={},g=r&&r.__extends||(v=function(r,o){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var t in o)o.hasOwnProperty(t)&&(r[t]=o[t])})(r,o)},function(r,o){function t(){this.constructor=r}v(r,o),r.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)});Object.defineProperty(b,"__esModule",{value:!0});var M=function(r){function o(o){var t=r.call(this,o)||this;return t.name="ValidationError",t.message=o,t}return g(o,r),o}(Error);b.ValidationError=M,Object.defineProperty(u,"__esModule",{value:!0});var w=p,x=m,y=b,_=function(r){if(!r||r.length<6)throw new y.ValidationError("The blurhash string must be at least 6 characters");var o=w.decode83(r[0]),t=Math.floor(o/9)+1,a=o%9+1;if(r.length!==4+2*a*t)throw new y.ValidationError("blurhash length mismatch: length is "+r.length+" but it should be "+(4+2*a*t))};u.isBlurhashValid=function(r){try{_(r)}catch(o){return{result:!1,errorReason:o.message}}return{result:!0}};var P=function(r){var o=r>>16,t=r>>8&255,a=255&r;return[x.sRGBToLinear(o),x.sRGBToLinear(t),x.sRGBToLinear(a)]},B=function(r,o){var t=Math.floor(r/361),a=Math.floor(r/19)%19,e=r%19;return[x.signPow((t-9)/9,2)*o,x.signPow((a-9)/9,2)*o,x.signPow((e-9)/9,2)*o]};u.default=function(r,o,t,a){_(r),a|=1;for(var e=w.decode83(r[0]),n=Math.floor(e/9)+1,s=e%9+1,i=(w.decode83(r[1])+1)/166,h=new Array(s*n),c=0;c<h.length;c++)if(0===c){var l=w.decode83(r.substring(2,6));h[c]=P(l)}else{l=w.decode83(r.substring(4+2*c,6+2*c));h[c]=B(l,i*a)}for(var u=4*o,p=new Uint8ClampedArray(u*t),d=0;d<t;d++)for(var f=0;f<o;f++){for(var m=0,v=0,b=0,g=0;g<n;g++)for(c=0;c<s;c++){var M=Math.cos(Math.PI*f*c/o)*Math.cos(Math.PI*d*g/t),y=h[c+g*s];m+=y[0]*M,v+=y[1]*M,b+=y[2]*M}var j=x.linearTosRGB(m),R=x.linearTosRGB(v),T=x.linearTosRGB(b);p[4*f+0+d*u]=j,p[4*f+1+d*u]=R,p[4*f+2+d*u]=T,p[4*f+3+d*u]=255}return p};var j={};Object.defineProperty(j,"__esModule",{value:!0});var R=p,T=m,G=b;j.default=function(r,o,t,a,e){if(a<1||a>9||e<1||e>9)throw new G.ValidationError("BlurHash must have between 1 and 9 components");if(o*t*4!==r.length)throw new G.ValidationError("Width and height must match the pixels array");for(var n=[],s=function(e){for(var s=function(a){var s=0==a&&0==e?1:2,i=function(r,o,t,a){for(var e=0,n=0,s=0,i=4*o,h=0;h<o;h++)for(var c=0;c<t;c++){var l=a(h,c);e+=l*T.sRGBToLinear(r[4*h+0+c*i]),n+=l*T.sRGBToLinear(r[4*h+1+c*i]),s+=l*T.sRGBToLinear(r[4*h+2+c*i])}var u=1/(o*t);return[e*u,n*u,s*u]}(r,o,t,(function(r,n){return s*Math.cos(Math.PI*a*r/o)*Math.cos(Math.PI*e*n/t)}));n.push(i)},i=0;i<a;i++)s(i)},i=0;i<e;i++)s(i);var h,c,l=n[0],u=n.slice(1),p="",d=a-1+9*(e-1);if(p+=R.encode83(d,1),u.length>0){var f=Math.max.apply(Math,u.map((function(r){return Math.max.apply(Math,r)}))),m=Math.floor(Math.max(0,Math.min(82,Math.floor(166*f-.5))));h=(m+1)/166,p+=R.encode83(m,1)}else h=1,p+=R.encode83(0,1);return p+=R.encode83((c=l,(T.linearTosRGB(c[0])<<16)+(T.linearTosRGB(c[1])<<8)+T.linearTosRGB(c[2])),4),u.forEach((function(r){p+=R.encode83(function(r,o){return 19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*T.signPow(r[0]/o,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*T.signPow(r[1]/o,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*T.signPow(r[2]/o,.5)+9.5))))}(r,h),2)})),p},function(r){Object.defineProperty(r,"__esModule",{value:!0});var o=u;r.decode=o.default,r.isBlurhashValid=o.isBlurhashValid;var t=j;r.encode=t.default,function(o){for(var t in o)r.hasOwnProperty(t)||(r[t]=o[t])}(b)}(l);const $=n();o("data-v-6800f953");const O={class:"blurhash-placeholder",ref:"canvas",width:"32",height:"32"};t();const L=$(((r,o,t,n,s,i)=>(a(),e("canvas",O,null,512))));const I={props:{blurhash:String},setup(r){const o=s(null);return i((()=>{try{const t=l.decode(r.blurhash,32,32),a=new ImageData(t,32,32);o.value.getContext("2d").putImageData(a,0,0)}catch(t){console.log(t)}})),{canvas:o}}};I.render=L,I.__scopeId="data-v-6800f953";const V=n();o("data-v-2d0bff3c");const E={class:"picture-item"};t();const q=V(((r,o,t,n,s,i)=>{const l=h("blurhash");return a(),e("div",E,[c(l,{blurhash:t.photo.blur_hash},null,8,["blurhash"]),c("picture",{class:{loaded:n.loaded}},[c("source",{sizes:"100px",type:"image/webp",srcset:`https://images.unsplash.com/${t.photo.path}?crop=entropy&cs=srgb&fm=webp&ixid=${t.photo.ixid}&ixlib=rb-1.2.1&q=80&w=400 400w, https://images.unsplash.com/${t.photo.path}?crop=entropy&cs=srgb&fm=webp&ixid=${t.photo.ixid}&ixlib=rb-1.2.1&q=80&w=200 200w, https://images.unsplash.com/${t.photo.path}?crop=entropy&cs=srgb&fm=webp&ixid=${t.photo.ixid}&ixlib=rb-1.2.1&q=80&w=100 100w`},null,8,["srcset"]),c("source",{sizes:"100px",type:"image/jpeg",srcset:`https://images.unsplash.com/${t.photo.path}?crop=entropy&cs=srgb&fm=jpeg&ixid=${t.photo.ixid}&ixlib=rb-1.2.1&q=80&w=400 400w, https://images.unsplash.com/${t.photo.path}?crop=entropy&cs=srgb&fm=jpeg&ixid=${t.photo.ixid}&ixlib=rb-1.2.1&q=80&w=200 200w, https://images.unsplash.com/${t.photo.path}?crop=entropy&cs=srgb&fm=jpeg&ixid=${t.photo.ixid}&ixlib=rb-1.2.1&q=80&w=100 100w`},null,8,["srcset"]),c("img",{loading:"lazy",onLoad:o[1]||(o[1]=(...r)=>n.onLoaded&&n.onLoaded(...r)),src:`https://images.unsplash.com/${t.photo.path}?crop=entropy&cs=srgb&fm=jpeg&ixid=${t.photo.ixid}&ixlib=rb-1.2.1&q=80&w=200`},null,40,["src"])],2)])}));const z={name:"pictureItem",components:{blurhash:I},props:{photo:Object},setup(){const r=s(!1);return{loaded:r,onLoaded:()=>r.value=!0}}};z.render=q,z.__scopeId="data-v-2d0bff3c";export{z as _};
