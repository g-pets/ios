import{f as e,x as t,_ as o}from"./vendor.f9238244.js";const l=e([]);function r(e){const r=async(r={})=>{let a,c;try{const n=await t("iOS",1);a=o(r),a.id=function(){let e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),a.date=Date.now(),l.value.push(a),c=await n.add(e,a)}catch(n){console.error(n)}finally{a=null,c=null}};return{records:l,recordsToStore:async()=>{try{const o=await t("iOS",1);let r=await o.getAllFromIndex(e,"id");l.value=r,console.info(`Records To Store (${l.value.length}):  ${e}`)}catch(o){console.error(o)}},cleanStore:async()=>{try{l.value=[]}catch(e){console.error(e)}},getRecordF:async e=>{let t;try{return t={content:"343"},t}catch(o){console.error(o)}finally{t=null}},getRecords:async()=>{let o;try{const r=await t("iOS",1);o=await r.getAllFromIndex(e,"id"),l.value=o,console.log("Get records: "+e)}catch(r){console.error(r)}finally{o=null}},createRecord:r,updateRecord:async e=>{let t,r,a;try{let c=e._id;t=o(l[c]),r=o(e),r.updated=Date.now(),l[c]=r,a=await restRequest({method:"put",module:module,id:c,data:r}),a.ok||(l[c]=t)}catch(c){console.error(c)}finally{t=null,r=null,a=null}},dublicateRecord:async e=>{let t,a;try{t=l[e],a=o(t),await r(a)}catch(c){console.error(c)}finally{t=null,a=null}},deleteRecord:async e=>{let t;try{l[e].hidden=!0,t=await restRequest({method:"delete",module:module,id:e}),t.ok?delete l[e]:l[e].hidden=!1}catch(o){console.error(o)}finally{t=null}},createDummyRecords:async(e,t)=>{try{let o=await fetch(`http://localhost:85/v1/${e}/${t}`);(await o.json()).forEach((e=>r(e)))}catch(o){console.error(o)}},deleteAllRecords:async()=>{try{l.value=[];const o=await t("iOS",1);await o.clear(e)}catch(o){console.error(o)}},sortRecords:async function(e){l.value.sort(((t,o)=>t[e]-o[e]))}}}export{r as u};
