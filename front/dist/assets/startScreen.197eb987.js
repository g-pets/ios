import{_ as e}from"./navigationBar.e31afa40.js";import{o as t,_ as a}from"./index.bc852a36.js";import{a as r,f as o,b as n,c,d as l,s as d,F as s,h as i,t as u,o as m}from"./vendor.fbc0f821.js";const h=t("iOS",1,{upgrade(e){const t=e.createObjectStore("notes",{keyPath:"id",autoIncrement:!1});t.createIndex("id","id"),t.createIndex("created","created")}});const y={class:"app notes-app"},p={class:"list-view notes"},R={class:"title"},f={class:"time"},v=l("div",{class:"arrow"},"Â >",-1);const g={name:"textApp",components:{navigationBar:e},methods:{openNote(e){this.$router.push({name:"noteScreen",params:{id:e}})},async addRecord(){let e=this.generateId();await this.$router.push({name:"noteScreen",params:{id:e}}),await this.createRecord({id:e})}},setup(){document.title="Notes | iOS";const{records:e,getRecords:t,createRecord:o,generateId:n,deleteAllRecords:c}=function(e){const t=r([]),o=()=>JSON.stringify(Date.now()),n=async(r={})=>{let n,c,l;try{return n=o(),c=a(r),c.id=n,c.created=Date.now(),t.value.push(c),l=await h.add(e,c),l}catch(d){console.error(d)}finally{n=null,c=null,l=null}};return{records:t,getRecordF:async e=>{let t;try{return t={content:"343"},t}catch(a){console.error(a)}finally{t=null}},getRecords:async()=>{let a;try{a=await h.getAllFromIndex(e,"created"),t.value=a}catch(r){console.error(r)}finally{a=null}},createRecord:n,updateRecord:async e=>{let r,o,n;try{let c=e._id;r=a(t[c]),o=a(e),o.updated=Date.now(),t[c]=o,n=await restRequest({method:"put",module:module,id:c,data:o}),n.ok||(t[c]=r)}catch(c){console.error(c)}finally{r=null,o=null,n=null}},dublicateRecord:async e=>{let r,o;try{r=t[e],o=a(r),await n(o)}catch(c){console.error(c)}finally{r=null,o=null}},deleteRecord:async e=>{let a;try{t[e].hidden=!0,a=await restRequest({method:"delete",module:module,id:e}),a.ok?delete t[e]:t[e].hidden=!1}catch(r){console.error(r)}finally{a=null}},createDummyRecords:async(e,t)=>{try{let a=await fetch(`http://localhost:85/v1/${e}/${t}`);(await a.json()).forEach((e=>n(e)))}catch(a){console.error(a)}},deleteAllRecords:async()=>{try{t.value=[],await h.clear(e)}catch(a){console.error(a)}},generateId:o}}("notes");return m((()=>t())),{records:e,createRecord:o,convertTime:function(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},generateId:n,deleteAllRecords:c}},render:function(e,t,a,r,m,h){const g=o("navigation-bar");return n(),c("div",y,[l(g,{title:`Notes (${r.records.length})`,background:["#875D52","#51372F","#3B2D21"]},{btn:d((()=>[l("div",{class:"add-note",onClick:t[1]||(t[1]=(...e)=>h.addRecord&&h.addRecord(...e))},"+"),l("div",{class:"add-note",onClick:t[2]||(t[2]=(...e)=>r.deleteAllRecords&&r.deleteAllRecords(...e))},"-")])),_:1},8,["title"]),l("div",p,[(n(!0),c(s,null,i(r.records,(e=>(n(),c("div",{class:"note",onClick:t=>h.openNote(e.id)},[l("div",R,u(e.title),1),l("div",f,u(r.convertTime(e.created)),1),v],8,["onClick"])))),256))])])}};export default g;
