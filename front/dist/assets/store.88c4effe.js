import{a as e,i as t,_ as a}from"./vendor.23464d0d.js";function l(l){const o=e([]),r=async(e={})=>{let r,c;try{const n=await t("iOS",1);r=a(e),r.id=function(){let e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),r.date=Date.now(),o.value.push(r),c=await n.add(l,r)}catch(n){console.error(n)}finally{r=null,c=null}};return{records:o,getRecordF:async e=>{let t;try{return t={content:"343"},t}catch(a){console.error(a)}finally{t=null}},getRecords:async()=>{let e;try{const a=await t("iOS",1);e=await a.getAllFromIndex(l,"id"),o.value=e}catch(a){console.error(a)}finally{e=null}},createRecord:r,updateRecord:async e=>{let t,l,r;try{let c=e._id;t=a(o[c]),l=a(e),l.updated=Date.now(),o[c]=l,r=await restRequest({method:"put",module:module,id:c,data:l}),r.ok||(o[c]=t)}catch(c){console.error(c)}finally{t=null,l=null,r=null}},dublicateRecord:async e=>{let t,l;try{t=o[e],l=a(t),await r(l)}catch(c){console.error(c)}finally{t=null,l=null}},deleteRecord:async e=>{let t;try{o[e].hidden=!0,t=await restRequest({method:"delete",module:module,id:e}),t.ok?delete o[e]:o[e].hidden=!1}catch(a){console.error(a)}finally{t=null}},createDummyRecords:async(e,t)=>{try{let a=await fetch(`http://localhost:85/v1/${e}/${t}`);(await a.json()).forEach((e=>r(e)))}catch(a){console.error(a)}},deleteAllRecords:async()=>{try{o.value=[];const e=await t("iOS",1);await e.clear(l)}catch(e){console.error(e)}}}}export{l as u};
